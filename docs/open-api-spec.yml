openapi: '3.0.2'
info:
  title: 'Bar Assistant API'
  version: '{{VERSION}}'
  description: |-
    Bar Assistant is a self hosted application for managing your home bar.

    ## Content

    You should set `Content-Type: application/json` header for each request.

    ## Authentication

    Add your login token in header for every request, for example: `Authorization: Bearer 1|dvWHLWuZbmWWFbjaUDla393Q9jK5Ou9ujWYPcvII`.
    For requests that need reference to bar, add your bar id via query string, for example: `/api/example?bar_id=1`

    ## Authorization

    You will get response with error message and status code `403` if you try to access resource that you don't have permissions for.

    ## Sorting

    Some endpoints allow sorting by specific attributes. Prepending `-` defines descending order, and omitting it defines ascending order. Seperate multiple sorts by a comma. For example: `?sort=name` will sort by name attribute in ascending order.

    ## Includes

    Some endpoints allow including extra relationship data on demand. Seperate multiple relations witha a comma. For example: `?include=notes,user` will include extra extra data for notes and user.

    ## Pagination

    Some endpoints allow paginating results. Use `?per_page=30` to limit total results per request. Use `?page=3` to go to a specific page.

    ## Filtering

    Some endpoints allow filtering by a specific attribute. For example: `?filter[attribute_name]=value`.

    [Documentation](https://bar-assistant.github.io/docs/) | [Source](https://github.com/karlomikus/bar-assistant)
servers:
  - url: /api
tags:
  - name: Server
    description: Operations related to server
  - name: Auth
    description: Operations related to user authentication
  - name: Profile
    description: Operations related to current user
  - name: Ingredients
    description: Operations related to ingredients
  - name: Cocktails
    description: Operations related to cocktails
  - name: Glasses
    description: Operations related to glasses
  - name: Images
    description: Operations related to images
  - name: "Ingredient categories"
    description: Operations related to ingredient categories
  - name: "User shelf"
    description: Operations related to user shelf
  - name: Users
    description: Operations related to users
  - name: "Shopping list"
    description: Operations related to user shopping list
  - name: "Tags"
    description: Operations related to tags
  - name: "Ratings"
    description: Operations related to resource ratings
  - name: "Stats"
    description: Operations related to app statistics
  - name: "Cocktail methods"
    description: Operations related to cocktail methods
  - name: "Notes"
    description: Operations related to notes
  - name: "Collections"
    description: Operations related to user collections
  - name: "Import"
    description: Data import operations
  - name: "Utensils"
    description: Operations related to utensils
  - name: Bars
    description: Operations related to bars
  - name: Formulas
    description: Operations related to formulas
security:
  - user_token: []
paths:
  /server/version:
    get:
      tags:
        - Server
      summary: Get server information
      operationId: getServerVersion
      security: []
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
  /server/openapi:
    get:
      tags:
        - Server
      summary: Get open api specification in yaml format
      operationId: getServerSpec
      security: []
      responses:
        '200':
          description: OpenAPI schema in yaml format
  /login:
    post:
      tags:
        - Auth
      summary: Authenticate user and get a token
      operationId: login
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/AuthToken'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /logout:
    post:
      tags:
        - Auth
      summary: Logout currently authenticated user
      operationId: logout
      responses:
        '204':
          description: Successful response
  /register:
    post:
      tags:
        - Auth
      security: []
      summary: "Register a new user"
      operationId: registerUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Profile'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /cocktails:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      parameters:
      - $ref: '#/components/parameters/PageParameter'
      - $ref: '#/components/parameters/PerPageParameter'
      - in: query
        name: filter
        required: false
        description: Filter by specific attributes
        explode: true
        style: deepObject
        schema:
          type: object
          properties:
            id:
              type: string
              example: "3"
            name:
              type: string
              example: "old"
            ingredient_name:
              type: string
              example: "campari"
            ingredient_id:
              type: string
              example: "3"
            tag_id:
              type: string
              example: "4"
            created_user_id:
              type: string
              example: "3"
            glass_id:
              type: string
              example: "1"
            cocktail_method_id:
              type: string
              example: "1"
            favorites:
              type: boolean
              example: true
            on_shelf:
              type: boolean
              example: true
            is_public:
              type: boolean
              example: true
            user_rating_min:
              type: integer
              example: 3
            user_rating_max:
              type: integer
              example: 5
            average_rating_min:
              type: integer
              example: 3
            average_rating_max:
              type: integer
              example: 5
            abv_min:
              type: number
              example: 15
            abv_max:
              type: number
              example: 55.5
            main_ingredient_id:
              type: string
              example: "1"
            collection_id:
              type: string
              example: "1"
            shelf_ingredients:
              type: string
              example: 5,6,7
      - in: query
        name: sort
        required: false
        schema:
          type: string
          example: attribute_name
        description: "Available attributes: `name`, `created_at`, `average_rating`, `user_rating`, `abv`, `favorited_at`, `missing_ingredients`."
      - in: query
        name: include
        required: false
        schema:
          type: string
          example: attribute_name
        description: "Available attributes: `glass`, `createdUser`, `updatedUser`, `method`, `ingredients`, `utensils`."
      tags:
        - "Cocktails"
      summary: 'Show a paginated list of cocktails'
      operationId: getCocktails
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Cocktail'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '403':
          $ref: '#/components/responses/NotAuthorized'
    post:
      tags:
        - "Cocktails"
      summary: 'Create a new cocktail'
      operationId: createCocktail
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CocktailRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/cocktails/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Cocktail'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /cocktails/{id}:
    parameters:
    - name: id
      in: path
      required: true
      description: Database id of the cocktail
      schema:
        type: integer
    get:
      tags:
        - "Cocktails"
      summary: 'Details of a specific cocktail'
      operationId: getCocktail
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                    data:
                      $ref: '#/components/schemas/Cocktail'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - "Cocktails"
      summary: 'Update a specific cocktail'
      operationId: updateCocktail
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CocktailRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                    data:
                      $ref: '#/components/schemas/Cocktail'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Cocktails"
      summary: 'Delete a specific cocktail'
      operationId: deleteCocktail
      responses:
        '204':
          description: Successfully deleted cocktail response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /cocktails/{id}/toggle-favorite:
    parameters:
    - name: id
      in: path
      required: true
      description: Database id of the cocktail
      schema:
        type: integer
    post:
      tags:
        - "Cocktails"
      summary: 'Toggle adding cocktail to favorites'
      operationId: toggleFavoriteCocktail
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        description: 'Cocktail favorite ID'
                        example: 1
                      is_favorited:
                        type: boolean
                        description: 'Is cocktail favorited'
                        example: true
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /cocktails/{id}/public-link:
    parameters:
    - name: id
      in: path
      required: true
      description: Database id of the cocktail
      schema:
        type: integer
    post:
      tags:
        - "Cocktails"
      summary: 'Create a public ID for cocktail'
      operationId: createCocktailPublicLink
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CocktailPublic'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - "Cocktails"
      summary: 'Delete cocktail public link'
      operationId: deleteCocktailPublicLink
      responses:
        '204':
          description: Successfully deleted public link
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /cocktails/{id}/share:
    parameters:
    - name: id
      in: path
      required: true
      description: Database id of the cocktail
      schema:
        type: integer
    - name: type
      in: query
      schema:
        type: string
        enum:
          - json
          - yaml
          - yml
          - xml
    get:
      tags:
        - "Cocktails"
      summary: 'Get a shareable cocktail data'
      operationId: shareCocktail
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CocktailShare'
            application/xml:
              schema:
                $ref: '#/components/schemas/CocktailShare'
            application/yaml:
              schema:
                $ref: '#/components/schemas/CocktailShare'
        '400':
          description: Requested type not supported
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: api_error
                  message:
                    type: string
                    example: 'Requested type "notype" not supported.'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /cocktails/{id}/similar:
    get:
      parameters:
      - name: id
        in: path
        required: true
        description: Database id of the cocktail
        schema:
          type: integer
      - name: limit
        in: query
        description: Limit number of shown cocktails
        schema:
          type: integer
      tags:
        - "Cocktails"
      summary: 'Show a list of similar cocktails'
      operationId: getSimilarCocktails
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Cocktail'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /shelf/cocktails:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      parameters:
        - in: query
          name: limit
          required: false
          schema:
            type: integer
            example: 20
          description: 'Limit number of shown cocktails'
      tags:
        - "User shelf"
      summary: 'Get a list of cocktail ids that authorized user can make'
      operationId: getShelfCocktailIds
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: integer
                      example: 1
  /shelf/cocktail-favorites:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "User shelf"
      summary: 'Get a list of cocktail ids that you favorited'
      operationId: getFavoritedCocktailIds
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: integer
                      example: 1
  /shelf/ingredients:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "User shelf"
      summary: "Get all ingredients in user shelf"
      operationId: getShelfIngredients
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserIngredient'
  /shelf/ingredients/batch-store:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    post:
      tags:
        - "User shelf"
      summary: "Add multiple ingredients to user shelf"
      operationId: addIngredientsToShelf
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ingredient_ids:
                  type: array
                  example: [1]
                  items:
                    type: integer
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserIngredient'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /shelf/ingredients/batch-delete:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    post:
      tags:
        - "User shelf"
      summary: "Add a single ingredient to user shelf"
      operationId: removeIngredientsFromShelf
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ingredient_ids:
                  type: array
                  example: [1]
                  items:
                    type: integer
      responses:
        '204':
          description: Successfully deleted ingredients
  /ingredients:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      parameters:
      - $ref: '#/components/parameters/PageParameter'
      - $ref: '#/components/parameters/PerPageParameter'
      - in: query
        name: filter
        required: false
        description: Filter by specific parameters
        explode: true
        style: deepObject
        schema:
          type: object
          properties:
            id:
             type: string
             example: 1,2
            name:
             type: string
             example: "whi"
            name_exact:
             type: string
             example: "whiskey"
            category_id:
             type: string
             example: "1"
            created_user_id:
             type: string
             example: "1"
            origin:
             type: string
             example: "France"
            on_shopping_list:
             type: boolean
             example: true
            on_shelf:
             type: boolean
             example: true
            strength_min:
             type: integer
             example: 20
            strength_max:
             type: integer
             example: 50
            main_ingredients:
              type: boolean
              example: true
      - in: query
        name: sort
        required: false
        schema:
          type: string
          example: attribute_name
        description: "Available attributes: `name`, `created_at`, `strength`, `total_cocktails`."
      - in: query
        name: include
        required: false
        schema:
          type: string
          example: attribute_name
        description: "Available attributes: `parentIngredient`, `varieties`, `cocktails`, `cocktailIngredientSubstitutes`."
      tags:
        - Ingredients
      summary: 'Get a list of ingredients'
      operationId: getIngredients
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Ingredient'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '403':
          $ref: '#/components/responses/NotAuthorized'
    post:
      tags:
        - Ingredients
      summary: 'Create a new ingredient'
      operationId: createIngredient
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngredientRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/ingredients/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Ingredient'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /ingredients/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: Database id of the ingredient
        schema:
          type: integer
    get:
      tags:
        - Ingredients
      summary: 'Details of a specific ingredient'
      operationId: getIngredient
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                    data:
                      $ref: '#/components/schemas/Ingredient'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - Ingredients
      summary: 'Update an existing ingredient'
      operationId: updateIngredient
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngredientRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Ingredient'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - Ingredients
      summary: 'Delete a specific ingredient'
      operationId: deleteIngredient
      responses:
        '204':
          description: Successfully deleted ingredient
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /ingredients/{id}/extra:
    parameters:
      - name: id
        in: path
        required: true
        description: Database id of the ingredient
        schema:
          type: integer
    get:
      tags:
        - Ingredients
      summary: 'Show how many extra cocktails you can make if you add this to your shelf'
      operationId: extraIngredientCocktails
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                    data:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        slug:
                          type: string
                          example: mai-tai
                        name:
                          type: string
                          example: Mai Tai
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /glasses:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - Glasses
      summary: Show a list of glass types
      operationId: getGlasses
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Glass'
    post:
      tags:
        - Glasses
      summary: Create a new glass type
      operationId: createGlass
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GlassRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/glasses/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Glass'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /glasses/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: Database id of the glass
        schema:
          type: integer
    get:
      tags:
        - Glasses
      summary: Get a specific glass type
      operationId: getGlass
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Glass'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - Glasses
      summary: Update a specific glass type
      operationId: updateGlass
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GlassRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Glass'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - Glasses
      summary: Delete specific glass type
      operationId: deleteGlass
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /images:
    post:
      tags:
        - Images
      summary: Save multiple images
      operationId: uploadImages
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                images:
                  type: array
                  items:
                    $ref: '#/components/schemas/ImageRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Image'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /images/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of the image'
        schema:
          type: integer
        required: true
    get:
      tags:
        - Images
      summary: Get a specific image
      operationId: getImage
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Image'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - Images
      summary: Update image information
      operationId: updateImage
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImageRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Image'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - Images
      summary: Remove a specific image
      operationId: deleteImage
      responses:
        '204':
          description: Successful response
        '404':
          $ref: '#/components/responses/NotFound'
  /images/{id}/thumb:
    parameters:
      - in: path
        name: id
        description: 'Database id of the image'
        schema:
          type: integer
        required: true
    get:
      tags:
        - Images
      summary: Get a thumbnail of an image
      operationId: getImageThumb
      responses:
        '200':
          description: Successful response
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
        '404':
          $ref: '#/components/responses/NotFound'
  /ingredient-categories:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "Ingredient categories"
      summary: 'Show a list of ingredient categories'
      operationId: getIngredientCategories
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/IngredientCategory'
    post:
      tags:
        - "Ingredient categories"
      summary: 'Create a new ingredient category'
      operationId: createIngredientCategory
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngredientCategoryRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/ingredient-categories/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/IngredientCategory'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /ingredient-categories/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of the ingredient category'
        schema:
          type: integer
        required: true
    get:
      tags:
        - "Ingredient categories"
      summary: Get a specific ingredient category
      operationId: getIngredientCategory
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/IngredientCategory'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - "Ingredient categories"
      summary: Update a specific ingredient category
      operationId: updateIngredientCategory
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngredientCategoryRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/IngredientCategory'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Ingredient categories"
      summary: Delete specific ingredient category
      operationId: deleteIngredientCategory
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /profile:
    get:
      tags:
        - "Profile"
      summary: "Get info about currently authenticated user"
      operationId: getProfile
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Profile'
    post:
      tags:
        - "Profile"
      summary: "Update currently authenticated user"
      operationId: updateProfile
      description: "Updates currently authenticated user with new information. If password field is present also changes the password."
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: new@email.com
                name:
                  type: string
                  example: New name
                password:
                  type: string
                  nullable: true
                  example: "new-password"
                password_confirmation:
                  type: string
                  nullable: true
                  example: "new-password"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Profile'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /shopping-list:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "Shopping list"
      summary: "Show ingredients on your shopping list"
      operationId: getShoppingListIngredients
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserShoppingList'
  /shopping-list/share:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "Shopping list"
      summary: "Share your shopping list"
      operationId: shareShoppingList
      responses:
        '200':
          description: Successful response
          content:
            text/markdown:
              schema:
                type: string
                example: |-
                  # Recipe name
                  Description
  /shopping-list/batch-store:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    post:
      tags:
        - "Shopping list"
      summary: "Add multiple ingredients to a shopping list"
      operationId: addIngredientsToShoppingList
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ingredient_ids:
                  type: array
                  example: [1, 2, 3]
                  items:
                    type: integer
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserShoppingList'
  /shopping-list/batch-delete:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    post:
      tags:
        - "Shopping list"
      summary: "Delete multiple ingredients from a shopping list"
      operationId: deleteIngredientsFromShoppingList
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ingredient_ids:
                  type: array
                  example: [1, 2, 3]
                  items:
                    type: integer
      responses:
        '200':
          description: Successful response with deleted ingredient ids
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      ingredient_ids:
                        type: array
                        example: [1, 2, 3]
                        items:
                          type: integer
  /tags:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "Tags"
      summary: 'Show a list of all tags'
      operationId: getTags
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Tag'
    post:
      tags:
        - "Tags"
      summary: 'Create a new tag'
      operationId: createTag
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TagRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/tags/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Tag'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /tags/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a tag'
        schema:
          type: integer
        required: true
    get:
      tags:
        - "Tags"
      summary: Get a specific tag
      operationId: getTag
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Tag'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - "Tags"
      summary: Update a specific tag
      operationId: updateTag
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TagRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Tag'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Tags"
      summary: Delete specific tag
      operationId: deleteTag
      responses:
        '204':
          description: Successful response
        '404':
          $ref: '#/components/responses/NotFound'
  /ratings/cocktails/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a cocktail'
        schema:
          type: integer
        required: true
    post:
      tags:
        - "Ratings"
      summary: "Rate cocktail"
      operationId: rateCocktail
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                rating:
                  type: integer
                  example: 3
      responses:
        '200':
          description: Successful rating update response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Rating'
        '201':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Rating'
        '400':
          description: Resource already rated by user
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Ratings"
      summary: Delete current user's cocktail rating
      operationId: deleteCocktailRating
      responses:
        '204':
          description: Successfully deleted rating
        '404':
          $ref: '#/components/responses/NotFound'
  /users:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - Users
      summary: Show a list of users
      operationId: getUsers
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
        '403':
          $ref: '#/components/responses/NotAuthorized'
    post:
      tags:
        - Users
      summary: Create a new user
      operationId: createUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/users/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/User'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /users/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: Database id of the user
        schema:
          type: integer
      - in: query
        name: bar_id
        required: true
        schema:
          type: integer
          example: 1
        description: Bar reference
    get:
      tags:
        - Users
      summary: Get a specific user
      operationId: getUser
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/User'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - Users
      summary: Update a specific user
      operationId: updateUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/User'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - Users
      summary: Delete a specific user
      operationId: deleteUser
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /stats:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - Stats
      summary: Application stats
      operationId: getStats
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/StatsResponse'
  /cocktail-methods:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "Cocktail methods"
      summary: 'Show a list of all methods'
      operationId: getCocktailMethods
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CocktailMethod'
    post:
      tags:
        - "Cocktail methods"
      summary: 'Create a new method'
      operationId: createCocktailMethod
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CocktailMethodRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/cocktail-methods/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CocktailMethod'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /cocktail-methods/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a method'
        schema:
          type: integer
        required: true
    get:
      tags:
        - "Cocktail methods"
      summary: Get a specific method
      operationId: getCocktailMethod
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CocktailMethod'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - "Cocktail methods"
      summary: Update a specific method
      operationId: updateCocktailMethod
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CocktailMethodRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CocktailMethod'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Cocktail methods"
      summary: Delete specific method
      operationId: deleteCocktailMethod
      responses:
        '204':
          description: Successful response
        '404':
          $ref: '#/components/responses/NotFound'
  /notes:
    post:
      tags:
        - "Notes"
      summary: Create a new note
      operationId: createNote
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoteRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/notes/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Note'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /notes/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a note'
        schema:
          type: integer
        required: true
    get:
      tags:
        - "Notes"
      summary: Show a single note
      operationId: getNote
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Note'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - "Notes"
      summary: Delete specific note
      operationId: deleteNote
      responses:
        '204':
          description: Successful response
        '404':
          $ref: '#/components/responses/NotFound'
  /collections:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      parameters:
      - in: query
        name: filter
        required: false
        description: Filter by specific parameters
        explode: true
        style: deepObject
        schema:
          type: object
          properties:
            id:
              type: string
              example: 3,4,5
            name:
              type: string
              example: "my collection"
            cocktail_id:
              type: integer
              example: 1
      - in: query
        name: sort
        required: false
        schema:
          type: string
          example: name,-created_at
        description: "Sort by specific parameters, change order by prepending `-`. Available sorts: `name`, `created_at`. Seperate multiple sorts with a comma `,`."
      tags:
        - "Collections"
      summary: List user collections
      operationId: getUserCollections
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CollectionResponse'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - "Collections"
      summary: Create a new collection
      operationId: createUserCollection
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionRequest'
      responses:
        '201':
          description: Successful response
          headers:
            Location:
              description: Absolute URL to new resource
              schema:
                type: string
                example: 'http://localhost/api/collections/1'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CollectionResponse'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
  /collections/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a collection'
        schema:
          type: integer
        required: true
    get:
      tags:
        - "Collections"
      summary: Show a single collection
      operationId: getUserCollection
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CollectionResponse'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - "Collections"
      summary: Add multiple cocktails to collection
      operationId: addCocktailsToCollection
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cocktails:
                  type: array
                  items:
                    type: integer
                  example: [1, 2, 3]
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CollectionResponse'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - "Collections"
      summary: Update a specific collection
      operationId: updateUserCollection
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CollectionResponse'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Collections"
      summary: Delete specific collection
      operationId: deleteUserCollection
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /collections/{id}/cocktails/{cocktailId}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a collection'
        schema:
          type: integer
        required: true
      - in: path
        name: cocktailId
        description: 'Database id of a cocktail'
        schema:
          type: integer
        required: true
    put:
      tags:
        - "Collections"
      summary: Add cocktail to collection
      operationId: addCocktailToCollection
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CollectionResponse'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - "Collections"
      summary: Remove cocktail from collection
      operationId: deleteCocktailFromCollection
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /import/cocktail:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
      - in: query
        name: type
        description: Data source type, defaults to URL
        schema:
          type: string
          enum:
            - json
            - url
    post:
      tags:
        - "Import"
      summary: Import cocktail from a data source
      operationId: importCocktail
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - source
              properties:
                source:
                  type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    additionalProperties: true
  /collections/{id}/share:
    parameters:
      - in: path
        name: id
        description: 'Database id of a collection'
        schema:
          type: integer
        required: true
      - name: type
        in: query
        schema:
          type: string
          enum:
            - json
            - yaml
            - yml
    get:
      tags:
        - "Collections"
      summary: Share a collection
      operationId: shareUserCollection
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
            application/yaml:
              schema:
                type: object
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /utensils:
    parameters:
      - $ref: '#/components/parameters/BarParameter'
    get:
      tags:
        - "Utensils"
      summary: 'Show a list of utensils'
      operationId: getUtensils
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Utensil'
    post:
      tags:
        - "Utensils"
      summary: Add utensil
      operationId: addUtensil
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UtensilRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Utensil'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /utensils/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of utensil'
        schema:
          type: integer
        required: true
    get:
      tags:
        - "Utensils"
      summary: Show a single utensil
      operationId: getUtensil
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Utensil'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - "Utensils"
      summary: Update a specific utensil
      operationId: updateUtensil
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UtensilRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Utensil'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - "Utensils"
      summary: Delete specific utensil
      operationId: deleteUtensil
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /bars:
    get:
      tags:
        - Bars
      summary: 'Show a list of bars'
      operationId: getBars
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bar'
    post:
      tags:
        - Bars
      summary: Add bar
      operationId: addBar
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BarRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Bar'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /bars/{id}:
    parameters:
      - in: path
        name: id
        description: 'Database id of a bar'
        schema:
          type: integer
        required: true
    get:
      tags:
        - Bars
      summary: Get a specific bar
      operationId: getBar
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Bar'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - Bars
      summary: Update a specific bar
      operationId: updateBar
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BarRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Bar'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
    delete:
      tags:
        - Bars
      summary: Delete specific bar
      operationId: deleteBar
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /bars/{id}/memberships:
    delete:
      tags:
        - Bars
      summary: Leave the bar if you have membership
      operationId: leaveBar
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /bars/{id}/memberships/{userId}:
    parameters:
      - in: path
        name: userId
        description: 'Database id of user'
        schema:
          type: integer
        required: true
    delete:
      tags:
        - Bars
      summary: Remove user from the bar
      operationId: deleteMembership
      responses:
        '204':
          description: Successful response
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /formulas:
    post:
      tags:
        - Formulas
      summary: Add new math formula
      operationId: addMathFormula
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FormulaRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Formula'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /formulas/{id}/execute:
    post:
      tags:
        - Formulas
      summary: Add new math formula
      operationId: executeMathFormula
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FormulaExecuteRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/FormulaResult'
        '403':
          $ref: '#/components/responses/NotAuthorized'
        '404':
          $ref: '#/components/responses/NotFound'
components:
  securitySchemes:
    user_token:
      type: http
      scheme: bearer
  parameters:
    BarParameter:
      name: bar_id
      in: query
      description: Reference to bar resource
      required: true
      schema:
        type: integer
    PageParameter:
      name: page
      in: query
      description: Set current page number
      required: false
      schema:
        type: integer
    PerPageParameter:
      name: per_page
      in: query
      description: Total number of results per page
      required: false
      schema:
        type: integer
  responses:
    UnprocessableEntity:
      description: Request body validation failed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            properties:
              type:
                type: string
                example: api_error
              message:
                type: string
                example: 'Resource record not found.'
    NotAuthorized:
      description: Not authorized
      content:
        application/json:
          schema:
            type: object
            properties:
              type:
                type: string
                example: api_error
              message:
                type: string
                example: 'You are not authorized for this action.'
  schemas:
    PaginationLinks:
      type: object
      required:
        - first
        - last
        - prev
        - next
      properties:
        first:
          type: string
          nullable: true
          example: http://localhost/api/resource?page=1
        last:
          type: string
          nullable: true
          example: http://localhost/api/resource?page=10
        prev:
          type: string
          nullable: true
          example: null
        next:
          type: string
          nullable: true
          example: http://localhost/api/resource?page=2
    PaginationMeta:
      type: object
      required:
        - current_page
        - from
        - last_page
        - links
        - path
        - per_page
        - to
        - total
      properties:
        current_page:
          type: integer
          example: 1
        from:
          type: integer
          example: 1
        last_page:
          type: integer
          example: 10
        links:
          type: array
          items:
            type: object
            required:
              - url
              - label
              - active
            properties:
              url:
                type: string
                nullable: true
              label:
                type: string
              active:
                type: boolean
        path:
          type: string
          example: http://localhost/api/resource
        per_page:
          type: integer
          example: 15
        to:
          type: integer
          example: 15
        total:
          type: integer
          example: 100
    Glass:
      type: object
      nullable: true
      required:
        - id
        - name
        - description
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: 'Cocktail glass'
        description:
          type: string
          nullable: true
          example: 'Description of glass'
        cocktails_count:
          type: integer
          example: 50
    GlassRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          example: Cocktail glass
        description:
          type: string
          nullable: true
          example: 'A stemmed glass'
    IngredientRequest:
      type: object
      required:
        - name
        - strength
        - ingredient_category_id
      properties:
        name:
          type: string
          example: 'Jack Daniels'
        strength:
          type: number
          format: float
          example: 40.0
        description:
          type: string
          example: 'A type of whiskey'
          nullable: true
        origin:
          type: string
          example: 'North America'
          nullable: true
        images:
          type: array
          example: [1, 2, 3]
          items:
            type: integer
        ingredient_category_id:
          type: integer
          example: 1
        color:
          type: string
          format: hex
          example: '#ffffff'
          nullable: true
        parent_ingredient_id:
          type: integer
          example: 1
          nullable: true
    Ingredient:
      type: object
      required:
        - id
        - slug
        - name
        - strength
        - description
        - origin
        - main_image_id
        - images
        - color
        - category
      properties:
        id:
          type: integer
          example: 1
        slug:
          type: string
          example: 'jack-daniels'
        name:
          type: string
          example: 'Jack Daniels'
        strength:
          type: number
          format: float
          example: 40.0
        description:
          type: string
          nullable: true
          example: 'A type of whiskey'
        origin:
          type: string
          nullable: true
          example: 'North America'
        main_image_id:
          type: integer
          example: 1
          nullable: true
        images:
          type: array
          items:
            $ref: '#/components/schemas/Image'
        parent_ingredient:
          type: object
          nullable: true
          properties:
            id:
              type: integer
              example: 1
            slug:
              type: string
              example: "vodka"
            name:
              type: string
              example: "Vodka"
        color:
          type: string
          format: hex
          example: '#ffffff'
          nullable: true
        category:
          $ref: '#/components/schemas/IngredientCategory'
        cocktails_count:
          type: integer
          example: 12
        varieties:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              slug:
                type: string
                example: 'ingredient-1'
              name:
                type: string
                example: 'Ingredient 1'
        cocktails:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              slug:
                type: string
                example: 'cocktail-1'
              name:
                type: string
                example: 'Cocktail 1'
    IngredientCategory:
      type: object
      required:
        - id
        - name
        - description
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: Spirits
        description:
          type: string
          nullable: true
          example: 'A category of base spirits'
    IngredientCategoryRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          example: Spirits
        description:
          type: string
          nullable: true
          example: 'A category of base spirits'
    Version:
      type: object
      required:
        - version
        - type
        - search_host
        - search_version
      properties:
        version:
          type: string
          example: 'v3.0.0'
        type:
          type: string
          example: 'local'
        search_host:
          type: string
          format: hostname
          example: 'https://search.example.com'
        search_version:
          type: string
          example: '1.3.0'
    Image:
      type: object
      required:
        - id
        - file_path
        - url
        - copyright
        - sort
        - placeholder_hash
      properties:
        id:
          type: integer
          example: 1
        file_path:
          type: string
          example: 'ingredients/ingredient-image.png'
        url:
          type: string
          example: 'http://localhost.com/app_images/ingredients/ingredient-image.png'
        copyright:
          type: string
          example: 'Somewhere from the web'
          nullable: true
        sort:
          type: integer
          example: 1
        placeholder_hash:
          type: string
          nullable: true
          description: ThumbHash implementation for placeholder image
          example: '1QcSHQRnh493V4dIh4eXh1h4kJUI'
    ImageRequest:
      type: object
      properties:
        image:
          type: string
          nullable: true
          format: binary
        image_url:
          type: string
          nullable: true
          format: URL
          example: "https://pathtoimage.com/image.jpg"
        sort:
          type: integer
          nullable: true
          example: 1
        copyright:
          type: string
          example: "Wikipedia"
          nullable: true
    Profile:
      type: object
      required:
        - id
        - name
        - email
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: 'Bar Tender'
        email:
          type: string
          example: 'bar@tender.com'
    UserRequest:
      type: object
      required:
        - name
        - email
        - is_admin
      properties:
        name:
          type: string
          example: User Name
        email:
          type: string
          example: admin@example.com
        password:
          type: string
          example: password
        is_admin:
          type: boolean
          example: false
    User:
      type: object
      required:
        - id
        - name
        - email
        - is_admin
        - search_api_key
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: User Name
        email:
          type: string
          example: admin@example.com
        is_admin:
          type: boolean
          example: false
        search_api_key:
          type: string
          example: 3aab83bbed9bb5e38d00c0c10a006676ed8703a26ffc8c644e2f588a5a574584
    CocktailIngredientSubstitute:
      type: object
      required:
        - id
        - slug
        - name
      properties:
        id:
          type: integer
          example: 1
        slug:
          type: string
          example: 'ingredient-1'
        name:
          type: string
          example: 'Ingredient 1'
    CocktailIngredient:
      type: object
      required:
        - sort
        - amount
        - units
        - optional
        - ingredient_id
        - name
        - ingredient_slug
      properties:
        sort:
          type: integer
          example: 0
        amount:
          type: number
          format: float
          example: 30.0
        units:
          type: string
          example: ml
        optional:
          type: boolean
          example: false
        ingredient_id:
          type: integer
          example: 1
        name:
          type: string
          example: 'Ingredient name'
        ingredient_slug:
          type: string
          example: 'ingredient-name'
        substitutes:
          type: array
          items:
            $ref: '#/components/schemas/CocktailIngredientSubstitute'
    Cocktail:
      type: object
      required:
        - id
        - slug
        - name
        - instructions
        - garnish
        - description
        - source
        - main_image_id
        - images
        - tags
        - rating
        - created_at
        - updated_at
        - abv
        - public_id
        - access
      properties:
        id:
          type: integer
          example: 1
        slug:
          type: string
          example: 'cocktail-name'
        name:
          type: string
          example: 'Cocktail name'
        instructions:
          type: string
          example: |-
            1. Step
            2. Step
        garnish:
          type: string
          nullable: true
          example: Lemon wheel
        description:
          type: string
          nullable: true
          example: 'A short cocktail description'
        source:
          type: string
          nullable: true
          example: http://wikipedia.org
        main_image_id:
          type: integer
          example: 1
          nullable: true
        images:
          type: array
          items:
            $ref: '#/components/schemas/Image'
        tags:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              name:
                type: string
                format: Tagname
        glass:
          $ref: '#/components/schemas/Glass'
        ingredients:
          type: array
          items:
            $ref: '#/components/schemas/CocktailIngredient'
        rating:
          type: object
          properties:
            user:
              type: integer
              nullable: true
              example: 5
            average:
              type: integer
              example: 5
            total_votes:
              type: integer
              example: 322
        created_at:
          type: string
          format: datetime
          example: 2023-01-01T12:20:25.000000Z
        updated_at:
          type: string
          format: datetime
          nullable: true
          example: 2023-01-01T12:20:25.000000Z
        created_user:
          $ref: '#/components/schemas/UserBasic'
        updated_user:
          $ref: '#/components/schemas/UserBasic'
        method:
          $ref: '#/components/schemas/CocktailMethod'
        utensils:
          type: array
          items:
            $ref: '#/components/schemas/Utensil'
        abv:
          type: number
          format: float
          nullable: true
          example: 18.12
        public_id:
          type: string
          nullable: true
          format: uuid
        access:
          type: object
          properties:
            can_edit:
              type: boolean
            can_delete:
              type: boolean
            can_rate:
              type: boolean
            can_add_note:
              type: boolean
        navigation:
          type: object
          properties:
            prev:
              type: string
              example: 'whiskey-sour-1'
              description: Slug of prev cocktail
            next:
              type: string
              example: 'martini-1'
              description: Slug of next cocktail
    CocktailRequest:
      type: object
      required:
        - name
        - instructions
      properties:
        name:
          type: string
          example: 'Cocktail name'
        instructions:
          type: string
          example: |-
            1. Step
            2. Step
        garnish:
          type: string
          nullable: true
          example: Lemon wheel
        description:
          type: string
          nullable: true
          example: 'A short cocktail description'
        source:
          type: string
          nullable: true
          example: http://wikipedia.org
        images:
          type: array
          example: [1, 2]
          items:
            type: integer
            description: Image resource id
            example: 1
        tags:
          type: array
          example: ['Gin', 'IBA Official']
          items:
            type: string
        glass_id:
          type: integer
          example: 1
          nullable: true
        ingredients:
          type: array
          items:
            type: object
            required:
              - ingredient_id
              - amount
              - units
            properties:
              ingredient_id:
                type: integer
                example: 1
              amount:
                type: number
                format: float
                example: 30
              units:
                type: string
                example: ml
              optional:
                type: boolean
                example: false
              sort:
                type: integer
                example: 0
    UserIngredient:
      type: object
      required:
        - id
        - ingredient_id
        - ingredient_slug
      properties:
        id:
          type: integer
          example: 1
        ingredient_id:
          type: integer
          example: 1
        ingredient_slug:
          type: string
          example: "coffee"
    Tag:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Tag name"
        cocktails_count:
          type: integer
          example: 50
    TagRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          example: A new tag
    UserShoppingList:
      type: object
      required:
        - id
        - user_id
        - ingredient
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: integer
          example: 1
        ingredient:
          type: object
          required:
            - id
            - slug
            - name
          properties:
            id:
              type: integer
              example: 1
            slug:
              type: string
              example: 'ingredient-1'
            name:
              type: string
              example: 'Ingredient 1'
    ValidationError:
      type: object
      required:
        - message
        - errors
      properties:
        message:
          type: string
          example: "The resource name must be a string. (and 4 more errors)"
        errors:
          type: object
          properties:
            property_key:
              type: array
              example: ["The property_key field is required."]
              items:
                type: string
    Rating:
      type: object
      required:
        - id
        - rateable_id
        - user_id
        - rating
      properties:
        id:
          type: integer
          example: 1
        rateable_id:
          type: integer
          example: 1
        user_id:
          type: integer
          example: 1
        rating:
          type: integer
          example: 3
    StatsResponse:
      type: object
      required:
        - total_cocktails
        - total_ingredients
        - total_collections
        - total_shelf_cocktails
        - total_shelf_ingredients
        - most_popular_ingredients
        - top_rated_cocktails
      properties:
        total_cocktails:
          type: integer
          example: 120
        total_ingredients:
          type: integer
          example: 234
        total_collections:
          type: integer
          example: 20
        total_shelf_cocktails:
          type: integer
          example: 43
        total_shelf_ingredients:
          type: integer
          example: 12
        most_popular_ingredients:
          type: array
          items:
            type: object
            properties:
              ingredient_id:
                type: integer
                example: 1
              cocktails_count:
                type: integer
                example: 23
        top_rated_cocktails:
          type: array
          items:
            type: object
            properties:
              cocktail_id:
                type: integer
                example: 1
              avg_rating:
                type: integer
                example: 4
              votes:
                type: integer
                example: 12
    CocktailMethod:
      type: object
      nullable: true
      required:
        - id
        - name
        - dilution_percentage
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Method name"
        dilution_percentage:
          type: integer
          example: 23
    CocktailMethodRequest:
      type: object
      required:
        - name
        - dilution_percentage
      properties:
        name:
          type: string
          example: "Method name"
        dilution_percentage:
          type: integer
          example: 23
    NoteRequest:
      type: object
      required:
        - note
        - resource_id
        - resource
      properties:
        note:
          type: string
          example: "My new note body"
        resource_id:
          type: integer
          example: 1
        resource:
          type: string
          enum:
            - cocktail
          example: "cocktail"
    Note:
      type: object
      required:
        - id
        - note
        - user_id
        - created_at
      properties:
        id:
          type: integer
          example: 1
        note:
          type: string
          example: "My new note"
        user_id:
          type: integer
          example: 1
        created_at:
          type: string
          example: "2023-01-01 12:00:00"
    UserBasic:
      type: object
      nullable: true
      required:
        - id
        - name
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Bartender"
    CocktailCollection:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "My collection"
    CollectionRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          example: "Collection name"
        description:
          type: string
          example: "Collection description"
        cocktails:
          type: array
          items:
            type: integer
            example: 1
    CollectionResponse:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Collection name"
        description:
          type: string
          example: "Collection description"
        created_at:
          type: string
          example: "2023-01-01 12:00:00"
        cocktails:
          type: array
          example: [1, 2, 3, 4, 5]
          items:
            type: integer
    CocktailShare:
      type: object
      xml:
        name: cocktail
      properties:
        name:
          type: string
          example: 'Cocktail name'
        instructions:
          type: string
          example: |-
            1. Step
            2. Step
        garnish:
          type: string
          nullable: true
          example: Lemon wheel
        description:
          type: string
          nullable: true
          example: 'A short cocktail description'
        source:
          type: string
          nullable: true
          example: https://wikipedia.org
        tags:
          type: array
          example: ['Gin', 'IBA Official']
          items:
            type: string
        glass:
          type: string
          example: Lowball
          nullable: true
        method:
          type: string
          example: Shake
          nullable: true
        images:
          type: array
          items:
            type: object
            properties:
              url:
                type: string
                example: https://bar-assistant.com/images/image.jpg
              copyright:
                type: string
                nullable: true
              sort:
                type: integer
        ingredients:
          type: array
          items:
            type: object
            properties:
              sort:
                type: integer
                example: 1
              name:
                type: string
                example: Vodka
              amount:
                type: integer
                format: float
                example: 30
              units:
                type: string
                example: ml
              optional:
                type: boolean
                example: false
              category:
                type: string
                example: Spirits
              description:
                type: string
                example: Spirit made from grain
              strength:
                type: integer
                format: float
                example: 45
              origin:
                type: string
                nullable: true
                example: France
    Utensil:
      type: object
      required:
        - id
        - name
        - description
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Shaker"
        description:
          type: string
          example: "A recipient in 2 parts to shake cocktails vigorously."
    UtensilRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          example: "Shaker"
        description:
          type: string
          example: "A recipient in 2 parts to shake cocktails vigorously."
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          example: admin@example.com
        password:
          type: string
          example: password
    AuthToken:
      type: object
      required:
        - token
      properties:
        token:
          type: string
          example: 1|dvWHLWuZbmWWFbjaUDla393Q9jK5Ou9ujWYPcvII
    RegisterRequest:
      type: object
      required:
        - email
        - name
        - password
      properties:
        email:
          type: string
          example: "newuser@domain.com"
        name:
          type: string
          example: "New User"
        password:
          type: string
          example: "P4SSW0RD"
    Bar:
      type: object
      required:
        - id
        - name
        - subtitle
        - description
        - invite_code
        - search_driver_host
        - search_driver_api_key
        - created_at
        - updated_at
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "My bar"
        subtitle:
          type: string
          nullable: true
          example: "Bar subtitle"
        description:
          type: string
          nullable: true
          example: "Lorem ipsum dolor sit amet"
        invite_code:
          type: string
          nullable: true
          example: 01H8S3VH2HTEB3D893AW8NTBBC
        search_driver_host:
          type: string
          nullable: true
          example: null
        search_driver_api_key:
          type: string
          nullable: true
          example: null
        created_at:
          type: string
          format: datetime
          example: 2023-01-01T12:20:25.000000Z
        updated_at:
          nullable: true
          type: string
          format: datetime
          example: 2023-01-01T12:20:25.000000Z
        created_user:
          $ref: '#/components/schemas/UserBasic'
        updated_user:
          $ref: '#/components/schemas/UserBasic'
    BarRequest:
      type: object
      required:
        - name
        - subtitle
        - description
        - enable_invites
      properties:
        name:
          type: string
          example: "My bar name"
        subtitle:
          type: string
          nullable: true
          example: "The awesome bar"
        description:
          type: string
          nullable: true
          example: "A bar at the end of the town"
        enable_invites:
          type: boolean
          example: true
    CocktailPublic:
      type: object
      required:
        - public_id
        - public_at
        - public_expires_at
      properties:
        public_id:
          type: string
          nullable: true
          description: 'Public cocktail ULID'
          example: "01ARZ3NDEKTSV4RRFFQ69G5FAV"
        public_at:
          type: string
          nullable: true
          description: 'ULID created at datetime'
          example: "2023-03-14T20:20:20.000000Z"
        public_expires_at:
          type: string
          description: 'ULID expiration datetime'
          example: "2023-05-14T21:23:40.000000Z"
          nullable: true
    FormulaRequest:
      type: object
      properties:
        variables:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: var1
        formula:
          type: string
          example: 1 + $var1 + (10 * 20)
    Formula:
      type: object
      properties:
        id:
          type: integer
          example: 1
        variables:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: var1
        formula:
          type: string
          example: 1 + $var1 + (10 * 20)
    FormulaExecuteRequest:
      type: object
      properties:
        variables:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: var1
              value:
                type: string
                example: 50
    FormulaResult:
      type: object
      properties:
        result:
          type: string
          example: 40
